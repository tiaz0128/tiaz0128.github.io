---
layout: post
date: 2024-05-17
catalogue: "python"
subject: "python"
title: "디자인 패턴 - 책임연쇄(Chain of Responsibility)"
excerpt: "책임연쇄(Chain of Responsibility) 패턴에 대해서 알아보겠습니다."
author: tiaz
permalink: /python/9
tags: [python, 디자인패턴, 책임연쇄]
mermaid: true
---

## 책임연쇄 패턴

---

책임 연쇄 패턴은 행동 디자인 패턴 중 하나로, 요청을 처리할 수 있는 객체들의 체인을 따라 요청을 전달하는 방식으로 작동합니다.

여기서는 *'보고서 승인 처리'*를 구현해보면서 책임연쇄 패턴에 대해 알아보겠습니다.

## 보고서 처리

---

### 구조

- 핸들러(Handler): 요청을 처리하는 인터페이스를 정의합니다.
- 구체적 핸들러(Concrete Handler): 요청 처리의 실제 구현을 담당합니다.
- 클라이언트(Client): 첫 번째 핸들러에게 요청을 보냅니다.


### 작동 방식

각 핸들러는 다음 핸들러에 대한 참조를 가집니다. 요청이 들어오면 각 핸들러는 그 요청을 처리할 수 있는지 결정합니다.

처리를 수행하고 다음 핸들러로 요청을 전달합니다. 체인의 끝에 도달하거나 요청이 처리될 때까지 이 과정이 계속됩니다.


## 클래스 다이어그램

---

<pre class="mermaid center">
%%{
  init: {
    'theme': 'default',
    'themeVariables': {
      'lineColor': '#F8B229',
      'tertiaryColor': '#fff'
    }
  }
}%%
classDiagram
    direction TB
    class Client {
        +sendRequest()
    }
    class Handler {
        &lt&ltabstract&gt&gt
        -successor: Handler
        +setSuccessor(handler: Handler)
        +handleRequest(request: Request)*
    }
    class ConcreteHandler1 {
        +handleRequest(request: Request)
    }
    class ConcreteHandler2 {
        +handleRequest(request: Request)
    }
    class ConcreteHandler3 {
        +handleRequest(request: Request)
    }

    Handler <|-- ConcreteHandler1
    Handler <|-- ConcreteHandler2
    Handler <|-- ConcreteHandler3
    Client --> Handler: uses
    ConcreteHandler1 o-- ConcreteHandler2
    ConcreteHandler2 o-- ConcreteHandler3
</pre>

## 정리

---

책임 연쇄 패턴은 요청의 발신자와 수신자를 분리하고 싶을 때, 여러 객체가 요청을 처리할 수 있지만 그 핸들러가 런타임에 결정되어야 할 때 유용합니다. 이 패턴은 코드의 유연성과 확장성을 높이지만, 적절히 사용하지 않으면 복잡성을 증가시킬 수 있으므로 상황에 맞게 적용해야 합니다.

### 장점

- 결합도 감소: 요청의 발신자와 수신자가 서로를 모르게 할 수 있습니다.
- 유연성: 핸들러의 순서를 쉽게 변경하거나 새로운 핸들러를 추가할 수 있습니다.
- 단일 책임 원칙: 각 핸들러는 특정 요청 유형만 처리합니다.
- 개방/폐쇄 원칙: 기존 코드를 수정하지 않고 새로운 핸들러를 추가할 수 있습니다.

### 단점

적절한 핸들러가 없으면 요청이 처리되지 않을 수 있습니다.

### 구현 시 고려사항

- 체인의 종료 조건을 명확히 설정해야 합니다.
- 체인의 순서가 중요할 수 있으므로 신중히 설계해야 합니다.

### 사용 사례

- 로깅 시스템
- 이벤트 처리 시스템
- 요청 필터링 및 처리 (예: 웹 서버의 미들웨어)
- 승인 프로세스 (예: 보고서 승인)
