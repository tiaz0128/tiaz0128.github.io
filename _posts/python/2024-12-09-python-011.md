---
layout: post
date: 2024-12-08
upd_date: 2025-01-23
catalogue: python
subject: pattern
title: "ë””ìì¸ íŒ¨í„´ - ì „ëµ íŒ¨í„´ (Strategy Pattern)"
description: "íŒŒì´ì¬ì—ì„œ ì „ëµ(Strategy) íŒ¨í„´ì„ ë°°ì›Œ ë´…ì‹œë‹¤!"
author: tiaz0128
permalink: /python/11
tags: [python, ë””ìì¸ íŒ¨í„´, íŒ©í† ë¦¬]
mermaid: true
prev_post: /python/9
---

## ì „ëµ íŒ¨í„´ (Strategy Pattern)

ì „ëµ íŒ¨í„´(Strategy Pattern)ì€ í–‰ë™ íŒ¨í„´(Behavioral Pattern)ì— ì†í•©ë‹ˆë‹¤.ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ì •ì˜í•˜ê³  ê°ê°ì„ ìº¡ìŠí™”í•˜ì—¬ êµí™˜í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ì— ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ê³  êµì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì‚¬ìš© ì‚¬ë¡€

- ê²°ì œ ì‹œìŠ¤í…œ: ì‹ ìš©ì¹´ë“œ, í˜„ê¸ˆ, í¬ì¸íŠ¸ ë“± ë‹¤ì–‘í•œ ê²°ì œ ë°©ì‹
- íŒŒì¼ ì••ì¶•: ZIP, RAR ë“± ë‹¤ì–‘í•œ ì••ì¶• ì•Œê³ ë¦¬ì¦˜
- ê²Œì„ ìºë¦­í„°: ê±·ê¸°, ë›°ê¸° ë“± ë‹¤ì–‘í•œ ì´ë™ ë°©ì‹

## ìºë¦­í„° ì´ë™

ì—¬ê¸°ì„œëŠ” ê²Œì„ ìºë¦­í„°ì˜ 'ìºë¦­í„° ì´ë™'(ê±·ê¸°, ë›°ê¸° ë“±)ì„ êµ¬í˜„í•´ë³´ë©´ì„œ ì „ëµ íŒ¨í„´ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

### ìƒí™©

ê²Œì„ ìºë¦­í„°ë¥¼ ì›€ì§ì—¬ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ìºë¦­í„°ëŠ” ê±·ê¸°, ë›°ê¸° ë“±ì˜ ì›€ì§ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì›€ì§ì„ì€ ê²Œì„ ì§„í–‰ ì¤‘ì— ììœ ë¡­ê²Œ ë³€ê²½ë  ìˆ˜ ìˆì–´ì•¼ í•˜ë©°, ìƒˆë¡œìš´ ì›€ì§ì„ì„ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

![ê²Œì„ ìºë¦­í„°](/assets/img/content/python/011/001.png){:.img-s}

### êµ¬ì„±

ì „ëµ íŒ¨í„´ì€ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ìš”ì†Œë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.

- ì»¨í…ìŠ¤íŠ¸(Context): ì „ëµì„ ì‚¬ìš©í•˜ëŠ” ê°ì²´.
- ì „ëµ(Strategy): ì‹¤ì œ ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•œ í´ë˜ìŠ¤.

ì—¬ê¸°ì„œëŠ” ì›€ì§ì„ ì „ëµì„ ì‚¬ìš©í•˜ëŠ” ìºë¦­í„° í´ë˜ìŠ¤ê°€ ì»¨í…ìŠ¤íŠ¸, ì‹¤ì œ ì›€ì§ì„ ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ë“¤ì´ ì „ëµì— í•´ë‹¹í•©ë‹ˆë‹¤.

### ì¸í„°í˜ì´ìŠ¤

ë¨¼ì € ëª¨ë“  ì›€ì§ì„ ì „ëµì´ ë”°ë¼ì•¼ í•  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```python
from abc import ABC, abstractmethod

class MovementStrategy(ABC):
    @abstractmethod
    def move(self):
        pass
```

### ì „ëµ í´ë˜ìŠ¤(Strategy class)

ë‹¤ìŒìœ¼ë¡œ êµ¬ì²´ì ì¸ ì›€ì§ì„ ì „ëµë“¤ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ê°ê°ì˜ ì „ëµì€ ìì‹ ë§Œì˜ ê³ ìœ í•œ ì´ë™ ë°©ì‹ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

```python
class WalkStrategy(MovementStrategy):
    def move(self):
        print("ìºë¦­í„°ê°€ ê±¸ì–´ì„œ ì´ë™í•©ë‹ˆë‹¤. ì´ë™ì†ë„: 5")

class RunStrategy(MovementStrategy):
    def move(self):
        print("ìºë¦­í„°ê°€ ë›°ì–´ì„œ ì´ë™í•©ë‹ˆë‹¤. ì´ë™ì†ë„: 10")

class CrawlStrategy(MovementStrategy):
    def move(self):
        print("ìºë¦­í„°ê°€ ê¸°ì–´ì„œ ì´ë™í•©ë‹ˆë‹¤. ì´ë™ì†ë„: 2")
```

### ìºë¦­í„°

ì›€ì§ì„ ì „ëµì„ ì‚¬ìš©í•˜ëŠ” ìºë¦­í„° í´ë˜ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤. ìºë¦­í„°ëŠ” í˜„ì¬ ì„¤ì •ëœ ì „ëµì— ë”°ë¼ ì´ë™í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³   ì›€ì§ì„ì„ ë³€ê²½ í•  ìˆ˜ ìˆê²Œ, _Setter_ ë©”ì„œë“œ `set_movement`ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

```python
class Character:
    def __init__(self, strategy: MovementStrategy):
        self.strategy = strategy
    
    def move(self):
        return self.strategy.move()
    
    def set_movement(self, strategy: MovementStrategy):
        self.strategy = strategy
```

### ì‹¤í–‰

ì´ì œ ì‹¤ì œë¡œ ìºë¦­í„°ë¥¼ ìƒì„±í•˜ê³  ë‹¤ì–‘í•œ ì›€ì§ì„ì„ í…ŒìŠ¤íŠ¸í•´ë´…ì‹œë‹¤.

ìºë¦­í„°ê°€ ê°€ì§€ê³  ìˆëŠ” ì „ëµì— ë”°ë¼ì„œ ê°™ì€ ì´ë™ì´ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  _Setter_ ë©”ì„œë“œë¥¼ í†µí•´, ì›í•˜ëŠ” ë‹¤ë¥¸ ì „ëµìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
# ìºë¦­í„° ìƒì„± (ì´ˆê¸° ì „ëµ: ê±·ê¸°)
character = Character(WalkStrategy())

# ê±·ê¸° ì‹¤í–‰
character.move()  # ì¶œë ¥: ìºë¦­í„°ê°€ ê±¸ì–´ì„œ ì´ë™í•©ë‹ˆë‹¤. ì´ë™ì†ë„: 5

# ì „ëµì„ ë›°ê¸°ë¡œ ë³€ê²½
character.set_movement(RunStrategy())
character.move()  # ì¶œë ¥: ìºë¦­í„°ê°€ ë›°ì–´ì„œ ì´ë™í•©ë‹ˆë‹¤. ì´ë™ì†ë„: 10

# ì „ëµì„ ê¸°ì–´ê°€ê¸°ë¡œ ë³€ê²½
character.set_movement(CrawlStrategy())
character.move()  # ì¶œë ¥: ìºë¦­í„°ê°€ ê¸°ì–´ì„œ ì´ë™í•©ë‹ˆë‹¤. ì´ë™ì†ë„: 2
```

## í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'primaryColor': '#2a3844',
      'lineColor': '#fff',
      'primaryTextColor': '#fff',
      'tertiaryColor': '#fff'
    }
  }
}%%
classDiagram
    direction LR

    class MovementStrategy {
        &lt;&lt;interface&gt;&gt;
        +move()
    }
    
    class WalkStrategy {
        +move()
    }
    
    class RunStrategy {
        +move()
    }
    
    class CrawlStrategy {
        +move()
    }
    
    class Character {
        -strategy: MovementStrategy
        +\_\_init\_\_(strategy: MovementStrategy)
        +move()
        +set_movement(strategy: MovementStrategy)
    }
    
    MovementStrategy <|.. WalkStrategy
    MovementStrategy <|.. RunStrategy
    MovementStrategy <|.. CrawlStrategy
    Character o-- MovementStrategy
</pre>

## ì „ëµ íŒ¨í„´ì˜ ì¥ì 

ì „ëµ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

- ìƒˆë¡œìš´ ì „ëµì„ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì¶”ê°€ ê°€ëŠ¥.
- í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ì— ì „ëµì„ ììœ ë¡­ê²Œ ë³€ê²½ ê°€ëŠ¥.
- ê°ê°ì˜ ì „ëµì´ ë…ë¦½ì ìœ¼ë¡œ ìº¡ìŠí™”ë˜ì–´ ìˆì–´ ì½”ë“œ ê´€ë¦¬ê°€ ìš©ì´.

## ì „ëµ íŒ¨í„´ ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

ì „ëµ íŒ¨í„´ë„ ì‚¬ìš© ì‹œ ê³ ë ¤í•´ì•¼ í•  ì£¼ì˜ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ì „ëµ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ë§Œ, ë°˜ëŒ€ë¡œ ë¬´ë¶„ë³„í•˜ê²Œ ì „ëµ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°ì—ëŠ” ì„±ëŠ¥ìƒ ë¬¸ì œê°€ ë°œìƒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ì˜ ì‚¬í•­: ë©”ëª¨ë¦¬ ê´€ë¦¬

```python
class Character:
    def __init__(self):
        self._current_strategy = WalkStrategy()

    def set_movement(self, movement_type: str):
        # ë§¤ë²ˆ ìƒˆë¡œìš´ ì „ëµ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°
        match movement_type 
            case "walk":
                self._current_strategy = WalkStrategy()  # ê°ì²´ ìƒì„± ë¹„ìš© ë°œìƒ
            case "run":
                self._current_strategy = RunStrategy()   # ê°ì²´ ìƒì„± ë¹„ìš© ë°œìƒ
```

### í•´ê²° ë°©ë²•: ì‹±ê¸€í„´ íŒ¨í„´ í™œìš©

[ì‹±ê¸€í„´ íŒ¨í„´](/python/4){:.none}ì„ ì‚¬ìš©í•˜ì—¬ ê° ì „ëµ ê°ì²´ê°€ ë‹¨ í•œ ë²ˆë§Œ ìƒì„±ë˜ì–´ ì¬ì‚¬ìš©í•˜ê²Œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‹±ê¸€í„´ íŒ¨í„´ê³¼ [íŒ©í† ë¦¬ íŒ¨í„´](/python/6){:.none}ì„ í™œìš©í•˜ì—¬ ê°ì²´ ìƒì„±ì„ ê´€ë¦¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
class MovementStrategyFactory:
    _strategies = {}  # í´ë˜ìŠ¤ ë³€ìˆ˜ë¡œ ì „ëµ ê°ì²´ë“¤ì„ ìºì‹±
    
    @classmethod
    def get_strategy(cls, movement_type: str) -> MovementStrategy:
        # ì´ë¯¸ ìƒì„±ëœ ì „ëµì´ ìˆë‹¤ë©´ ì¬ì‚¬ìš©
        if movement_type not in cls._strategies:
            # ì²˜ìŒ ìš”ì²­ë  ë•Œë§Œ ì „ëµ ê°ì²´ ìƒì„± (ì§€ì—° ì´ˆê¸°í™”)
            match movement_type 
                case "walk":
                    cls._strategies[movement_type] = WalkStrategy()
                case "run":
                    cls._strategies[movement_type] = RunStrategy()
                case "crawl":
                    cls._strategies[movement_type] = CrawlStrategy()
        return cls._strategies[movement_type]
# ì‚¬ìš© ì˜ˆì‹œ
class Character:
    def __init__(self):
        # ì´ˆê¸°í™” ì‹œì ì— Factoryë¥¼ í†µí•´ ì „ëµ íšë“
        self._current_strategy = MovementStrategyFactory.get_strategy("walk")
    
    def set_movement(self, movement_type: str):
        # ì „ëµ ë³€ê²½ ì‹œì—ë„ Factoryë¥¼ í†µí•´ ì¬ì‚¬ìš©
        self._current_strategy = MovementStrategyFactory.get_strategy(movement_type)
```

## ë§ˆë¬´ë¦¬

ì „ëµ íŒ¨í„´ì€ ì•Œê³ ë¦¬ì¦˜ì˜ êµì²´ì™€ í™•ì¥ì´ ìì£¼ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì—ì„œ ìœ ìš©í•œ ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤. íŠ¹íˆ ê°œë°©-íì‡„ ì›ì¹™(OCP)ì„ ì˜ ë”°ë¥´ëŠ” íŒ¨í„´ì´ë©°, í™•ì¥ì„± ìˆëŠ” ì‹œìŠ¤í…œì„ ì„¤ê³„í•  ë•Œ ê³ ë ¤í•´ë³¼ ë§Œí•œ íŒ¨í„´ì…ë‹ˆë‹¤.

1. ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜êµ°ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°
2. ëŸ°íƒ€ì„ì— ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ê³  êµì²´í•´ì•¼ í•˜ëŠ” ê²½ìš°
3. ì•Œê³ ë¦¬ì¦˜ì˜ ë³€í˜•ì´ ìì£¼ ë°œìƒí•˜ëŠ” ê²½ìš°

ë‹¤ì–‘í•œ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜, íŒŒì¼ ì••ì¶• ë°©ì‹, í• ì¸ ì •ì±… ë“± ì—¬ëŸ¬ ìƒí™©ì—ì„œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ˜Š
