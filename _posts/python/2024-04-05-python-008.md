---
layout: post
date: 2024-04-05
catalogue: "python"
subject: "python"
title: "ë””ìì¸ íŒ¨í„´ - ë°ì½”ë ˆì´í„°(Decorate)"
excerpt: "ë°ì½”ë ˆì´í„°(Decorate) íŒ¨í„´ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤."
author: tiaz
permalink: /python/8
tags: [python, ë””ìì¸íŒ¨í„´, ë°ì½”ë ˆì´í„°]
mermaid: true
---

## ë°ì½”ë ˆì´í„°(Decorate)

---

> decorate : ì¥ì‹í•˜ë‹¤, ê¾¸ë¯¸ë‹¤

ë°ì½”ë ˆì´í„° íŒ¨í„´ì€ ë‹¨ì–´ì˜ ëœ»ì²˜ëŸ¼ ê°ì²´ë¥¼ ê¾¸ë©°ì£¼ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. _"ê°ì²´ì— ë™ì ìœ¼ë¡œ ìƒˆë¡œìš´ ì±…ì„ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤."_{:.yellow} ë¼ê³  ë§ì´ ì´ì•¼ê¸° í•©ë‹ˆë‹¤. ìŒ... ì •í™•íˆ ì–´ë–¤ ì˜ë¯¸ì¸ì§€ ì´í•´ê°€ ê°€ì§€ ì•ŠìŠµë‹ˆë‹¤.

![decorate](/assets/img/content/python/008/001.png){:.img-s}

## ì—¬ëŸ¬ê°€ì§€ ì¬ë£Œë¥¼ ë„£ì€ ì»¤í”¼

---

ì—¬ëŸ¬ê°€ì§€ ì»¤í”¼ë¥¼ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•´ë³´ë©° ë°ì½”ë ˆì´í„° íŒ¨í„´ ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!

### ìƒí™©

ì»¤í”¼ëŠ” ë“¤ì–´ê°€ëŠ” ì¬ë£Œì— ë”°ë¼ ë‹¤ì–‘í•œ ì»¤í”¼ë¥¼ ë§Œë“¤ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»¤í”¼ì— ìš°ìœ ë¥¼ ë„£ìœ¼ë©´ _'ë¼ë–¼'_, ì»¤í”¼ì— ì´ˆì½”ë¦¿ ê°€ë£¨ë¥¼ ë„£ìœ¼ë©´ _'ì¹´í˜ëª¨ì¹´'_ ë“±ë“±... ë¬´ìˆ˜íˆ ë§ì€ ì¡°í•©ìœ¼ë¡œ ì»¤í”¼ë¥¼ ë§Œë“¤ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![ë‹¤ì–‘í•œ ì»¤í”¼](/assets/img/content/python/008/002.png){:.img-s}

### ì½”ë“œ

ìš°ì„ ì€ ìƒì†ì„ í†µí•´ì„œ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ëŸ¼ ê¸°ë³¸ì´ ë˜ëŠ” `Coffee` í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ì„œ ê° ì¬ë£Œê°€ ì¶”ê°€ëœ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ê° ì»¤í”¼ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

```python
class Coffee:
    def __init__(self):
        self._cost = 4000
        self._recipe = ["Coffee"]

    def cost(self) -> int:
        return self._cost

    def recipe(self) -> list[str]:
        return self._recipe
```

```python
class LatteCoffee(Coffee):
    def __init__(self):
        super().__init__()
        self._cost += 500
        self._recipe += ["Milk"]

class MochaCoffee(Coffee):
    def __init__(self):
        super().__init__()
        self._cost += 1000
        self._recipe += ["Mocha"]
```

```python
if __name__ == "__main__":
    coffee = Coffee()
    latte_coffee = LatteCoffee()
    mocha_coffee = MochaCoffee()

    print(f"coffee / {coffee.recipe()} / {coffee.cost()}")
    print(f"Latte coffee / {latte_coffee.recipe()} / {latte_coffee.cost()}")
    print(f"Mocha coffee / {mocha_coffee.recipe()} / {mocha_coffee.cost()}")
```

```bash
coffee / ['Coffee'] / 4000
Latte coffee / ['Coffee', 'Milk'] / 4500
Mocha coffee / ['Coffee', 'Mocha'] / 5000
```

## ë„ˆë¬´ ë§ì€ ì»¤í”¼ ì¡°í•©

---

### ìƒí™©

ì»¤í”¼ë¥¼ ë§Œë“¤ë‹¤ë³´ë‹ˆ ë„£ì„ìˆ˜ ìˆëŠ” ì¬ë£Œê°€ ì ì  ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤. ì¬ë£Œê°€ ëŠ˜ì–´ë‚¨ì— ë”°ë¼ì„œ ì¡°í•©í•´ì„œ ë¨¹ì„ ìˆ˜ ìˆëŠ” ì»¤í”¼ì˜ ì¢…ë¥˜ë„ ê°ë‹¹í•˜ê¸° ì–´ë ¤ìš¸ ë§Œí¼ ëŠ˜ì—ˆìŠµë‹ˆë‹¤.

![ë„ˆë¬´ ë§ì€ ì¬ë£Œ](/assets/img/content/python/008/003.png){:.img-s}

### ì½”ë“œ

ê¸°ì¡´ì—ëŠ” ìƒì†ì„ í†µí•´ ê° ì»¤í”¼ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìƒì†ì„ ì‚¬ìš©í•´ì„œ ë§ì€ ê²½ìš°ì˜ ìˆ˜ë¥¼ ëª¨ë‘ êµ¬í˜„í•˜ê¸°ëŠ” ì ì  í˜ë“¤ì–´ ì§‘ë‹ˆë‹¤.

```python
class MilkMochaCoffee(LatteCoffee):
    def __init__(self):
        super().__init__()
        self._cost += 1000
        self._recipe += ["Mocha"]

class MilkMochaVanillaCoffee(MilkMochaCoffee):
    def __init__(self):
        super().__init__()
        self._cost += 500
        self._recipe += ["Vanilla"]
```

ìƒì†ì— ìƒì†ì„ ê³„ì†í•˜ëŠ”ê²Œ ë§ëŠ”ì§€ ì˜êµ¬ì‹¬ì„ ë§ˆêµ¬ë§ˆêµ¬ ë“¤ê¸° ì‹œì‘í•©ë‹ˆë‹¤.

## ë°ì½”ë ˆì´í„° íŒ¨í„´ì˜ íŠ¹ì§•

---

ì´ì œ ë°ì½”ë ˆì´í„° íŒ¨í„´ì˜ íŠ¹ì§• ë‘ ê°€ì§€ë¥¼ ë‹¤ì‹œ ê¸°ì–µí•´ ë´…ì‹œë‹¤.

1. ë™ì ìœ¼ë¡œ
2. ìƒˆë¡œìš´ ì±…ì„ì„ ì¶”ê°€

ì•ì„œ ìƒì†ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì„ ìƒê°í•´ ë´…ì‹œë‹¤. ìƒì†ì„ ì´ìš©í•œ ê²½ìš°, ì½”ë“œë¥¼ ì‹¤í–‰ í•˜ê¸° ì „ì— ì´ë¯¸ í´ë˜ìŠ¤ë¡œ ê° ì»¤í”¼ ê°ì²´ë¥¼ ë¯¸ë¦¬ ì „ë¶€ ë§Œë“¤ì–´ë‘ê³  ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¯¸ë¦¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ í•„ìš”ì—†ì´, ë™ì ìœ¼ë¡œ ê°ì²´ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ë§ë¶™ì—¬ ë‚˜ê°ˆ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

## ë°ì½”ë ˆì´í„°ë¥¼ ì´ìš©í•œ ì»¤í”¼ ì¡°í•©

---

### ì½”ë“œ

`Beverage`ëŠ” ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. cost()ì™€ recipe() ë©”ì†Œë“œë¥¼ ì¶”ìƒ ë©”ì†Œë“œë¡œ ì •ì˜í•˜ì—¬ ëª¨ë“  ìŒë£Œê°€ ì´ë¥¼ êµ¬í˜„í•˜ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤.

```python
from abc import ABC, abstractmethod

class Beverage(ABC):
    @abstractmethod
    def cost(self) -> int:
        pass

    @abstractmethod
    def recipe(self) -> list[str]:
        pass
```

`Coffee` í´ë˜ìŠ¤ëŠ” `Beverage`ì˜ êµ¬ì²´ì ì¸ êµ¬í˜„ì²´ì…ë‹ˆë‹¤. `cost()`ì™€ `recipe()` ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ êµ¬í˜„í•©ë‹ˆë‹¤.

```python
from typing import override

class Coffee(Beverage):
    @override
    def cost(self) -> int:
        return 5000

    @override
    def recipe(self) -> list[str]:
        return ["Coffee"]
```

`Decorator` í´ë˜ìŠ¤ëŠ” ë°ì½”ë ˆì´í„° íŒ¨í„´ì˜ ê°€ì¥ ì¤‘ìš”í•œ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

**ì´ í´ë˜ìŠ¤ëŠ” `Beverage`ë¥¼ ìƒì†ë°›ìœ¼ë©´ì„œ(inheritance), ë™ì‹œì— `Beverage` ê°ì²´ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ êµ¬ì„±(composition)í•˜ê³  ìˆìŠµë‹ˆë‹¤.**

```python
class Decorator(Beverage):
    def __init__(self, beverage: Beverage):
        self.beverage = beverage

    def cost(self) -> int:
        return self.beverage.cost()

    def recipe(self) -> list[str]:
        return self.beverage.recipe()
```

`Decorator`ë¥¼ ìƒì†ë°›ì•„ ê¸°ë³¸ ê¸°ëŠ¥ì„ ìœ ì§€í•˜ë©´ì„œ ì¶”ê°€ ê¸°ëŠ¥ì„ ë”í•©ë‹ˆë‹¤. `cost()`ì™€ `recipe()` ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ ê¸°ì¡´ ìŒë£Œì— ëª¨ì¹´ë‚˜ ìš°ìœ ë¥¼ ì¶”ê°€í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

```python
class Mocha(Decorator):
    def cost(self) -> int:
        return super().cost() + 1000

    def recipe(self)-> list[str]:
        return super().recipe() + ["Mocha"]

class Milk(Decorator):
    def cost(self) -> int:
        return super().cost() + 500

    def recipe(self) -> list[str]:
        return super().recipe() + ["Milk"]
```

ìƒì†ìœ¼ë¡œ í•´ê²° í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ê°ì²´ì— ìƒˆë¡œìš´ ì±…ì„ì„ ë™ì ìœ¼ë¡œ ì¶”ê°€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
if __name__ == '__main__':
    beverage: Beverage = Coffee()

    a = Mocha(beverage)
    b = Mocha(a)
    c = Milk(b)

    print(f"recipe: {c.recipe()} / cost: {c.cost()}")
```

### í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

`Decorator` í´ë˜ìŠ¤ê°€ `Beverage` ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ìœ¼ë©´ì„œ ë™ì‹œì— ë‚´ë¶€ì— `Beverage` ê°ì²´ë¥¼ êµ¬ì„±í•˜ëŠ” í˜•íƒœë¥¼ ê¸°ì–µí•©ì‹œë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'default',
    'themeVariables': {
      'lineColor': '#F8B229',
      'tertiaryColor': '#fff'
    }
  }
}%%
classDiagram
    direction LR

    class Beverage {
        &lt;&lt;interface&gt;&gt;
        str name

        cost()* int
        recipe()* list[str]
    }

    class Coffee {
        cost() int
        recipe() list[str]

    }

    Decorator *-- Beverage
    Decorator ..|> Beverage

    Beverage <|.. Coffee

    class Decorator {
        Beverage beverage
        cost()* int
        recipe()* list[str]
    }

    class Mocha {
        cost() int
        recipe() list[str]
    }

    class Milk {
        cost() int
        recipe() list[str]
    }

    Mocha --|> Decorator
    Milk --|> Decorator
</pre>

## ì •ë¦¬

---

ìƒì†ì„ í†µí•œ í´ë˜ìŠ¤ í™•ì¥ì´ ë¹„íš¨ìœ¨ì ì¸ ê²½ìš°ì—, ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì´ìš©í•˜ë©´ ë™ì ìœ¼ë¡œ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬í˜„ì—ì„œ ëˆˆì—¬ê²¨ ë³¼ ë¶€ë¶„ì€ `Decorator` í´ë˜ìŠ¤ê°€ ìƒì†ê³¼ ë™ì‹œì— ê°ì²´ë¥¼ êµ¬ì„±í•˜ëŠ” í˜•íƒœì…ë‹ˆë‹¤. io ì²˜ë¦¬ë‚˜, ì•ŒëŒ ë©”ì‹œì§€ë¥¼ ì¡°í•©í•˜ëŠ” ê²½ìš°ì— ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ í™œìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ˜Š

```python
# ê¸°ë³¸ ì•Œë¦¼
notifier = BaseNotifier()
notifier.send("message!")

# SMSì™€ Slackìœ¼ë¡œ ì•Œë¦¼
notifier = SlackNotifier(SMSNotifier(BaseNotifier()))
notifier.send("Important message!")

# SMS, Slack, Jiraë¡œ ì•Œë¦¼
notifier = JiraNotifier(SlackNotifier(SMSNotifier(BaseNotifier())))
notifier.send("Critical issue detected!")
```
