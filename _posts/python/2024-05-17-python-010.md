---
layout: post
date: 2024-10-19
catalogue: "python"
subject: "python"
title: "íŒŒì´ì¬ ì“°ë ˆë“œ"
subtitle: "íŒŒì´ì¬ì—ì„œ ì“°ë ˆë“œ(Thread)ì™€ ë½(Lock)ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤."
author: tiaz0128
permalink: /python/10
tags: [python, ì“°ë ˆë“œ]
mermaid: true
---

ì†Œí”„íŠ¸ì›¨ì–´ëŠ” ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ í”„ë¡œê·¸ë¨, í”„ë¡œì„¸ìŠ¤, ì“°ë ˆë“œì˜ ê°œë…ì„ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

## í”„ë¡œê·¸ë¨(Program)

---

ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì´ë€ í•˜ë“œ ë””ìŠ¤í¬(HDD), SSD ê°™ì€ ë””ìŠ¤í¬ì— ì €ì¥ëœ ì •ì ì¸ ìƒíƒœì˜ ëª…ë ¹ì–´ ì§‘í•©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 'ì •ì ì¸ ìƒíƒœ'ë€ ë§ì€, ì‹¤í–‰ ì¤‘ì´ì§€ ì•Šì€ ìƒíƒœì˜ ì½”ë“œë¥¼ ì˜ë¯¸ í•©ë‹ˆë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'lineColor': '#2196f3',
      'primaryTextColor': '#fff',
      'tertiaryColor': '#333'
    }
  }
}%%
flowchart LR
    subgraph "Hard Disk"
        Program[Program]
    end
</pre>

ê·¸ë ‡ë‹¤ë©´ 'ì‹¤í–‰ ì¤‘'ì´ë¼ëŠ” ìƒíƒœëŠ” ì–´ë–¤ ê²ƒì„ ì˜ë¯¸ í• ê¹Œìš”? í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.

## í”„ë¡œì„¸ìŠ¤(Process)

---

í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ ë…ë¦½ëœ ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹ë°›ê³  CPUê°€ ëª…ë ¹ì–´ë¥¼ ì²˜ë¦¬ í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŸ° ìƒíƒœë¥¼ 'í”„ë¡œì„¸ìŠ¤(Process)'ë¼ í•©ë‹ˆë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'lineColor': '#2196f3',
      'primaryTextColor': '#fff',
      'tertiaryColor': '#333'
    }
  }
}%%
flowchart LR
    subgraph "Hard Disk"
        Program[Program]
    end

    subgraph "Memory"
        Process[Process]
    end

    Program --- Process
</pre>

### Chrome ë¸Œë¼ìš°ì €

Chrome ë¸Œë¼ìš°ì €ëŠ” í•˜ë‚˜ì˜ íƒ­ì´ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ë™ì‘í•˜ëŠ” ë©€í‹° í”„ë¡œì„¸ìŠ¤(Multi Process) ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ê° íƒ­ì€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ íƒ­ì— ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ë‹¤ë¥¸ íƒ­ì€ ì•ˆì •ì ìœ¼ë¡œ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![í¬ë¡¬ íƒ­](/assets/img/content/python/010/002.png){:.img-m}

## í”„ë¡œì„¸ìŠ¤ íŠ¹ì§•

---

### í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ êµ¬ì„±

ê° í”„ë¡œì„¸ìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ì´ ë…ë¦½ëœ ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹ ë°›ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ í•œ í”„ë¡œì„¸ìŠ¤ê°€ ë¹„ì •ìƒ ì¢…ë£Œë˜ì–´ë„ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ì•ˆì •ì ìœ¼ë¡œ ë™ì‘ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'lineColor': '#2196f3',
      'primaryTextColor': '#fff',
      'tertiaryColor': '#333'
    }
  }
}%%
flowchart LR
    subgraph "Hard Disk"
        Program[Chrome.exe]
    end

    subgraph "Memory"
        Process1[Chrome Tab A]
        Process2[Chrome Tab B]
    end

    Program --- Process1
    Program --- Process2
</pre>

í”„ë¡œì„¸ìŠ¤ëŠ” ë©”ëª¨ë¦¬ë¥¼ í¬ê²Œ 4ê°€ì§€ì˜ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‚¬ìš©í•©ë‹ˆë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'lineColor': '#2196f3',
      'primaryTextColor': '#000',
      'tertiaryColor': '#333'
    }
  }
}%%
flowchart TB
    subgraph "Memory"
        subgraph "Process"
            CS1[Code Section]
            DS1[Data Section]
            HS1[Heap Section]
            SS1[Stack Section]
        end
    end

    style Process fill:#555,stroke:#333,stroke-width:1px

    style CS1 fill:#bbf,stroke:#333,stroke-width:1px
    style DS1 fill:#ddf,stroke:#333,stroke-width:1px
    style HS1 fill:#ffd,stroke:#333,stroke-width:1px
    style SS1 fill:#dfd,stroke:#333,stroke-width:1px
</pre>

- ì½”ë“œ ì˜ì—­(Code Section) : ì‹¤í–‰ ì½”ë“œ
- ë°ì´í„° ì˜ì—­(Data Section) : ì „ì—­ ë³€ìˆ˜/ì •ì  ë³€ìˆ˜
- í™ ì˜ì—­(Heap Section) : ë™ì  ë©”ëª¨ë¦¬ í• ë‹¹ ì˜ì—­
- ìŠ¤íƒ ì˜ì—­(Stack Section) : ì§€ì—­ ë³€ìˆ˜, í•¨ìˆ˜ í˜¸ì¶œ ì •ë³´

### IPC(Inter-Process Communication)

í”„ë¡œì„¸ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ë¼ë¦¬ í†µì‹ í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ë°©ì‹ì„ IPC(Inter-Process Communication)ë¼ í•©ë‹ˆë‹¤. íŒŒì´í”„(Pipe), ì†Œì¼“(Socket), ê³µìœ ë©”ëª¨ë¦¬(Shared Memory), ë©”ì‹œì§€ í(Message Queue) ë“±ì˜ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŸ° í†µì‹  ê³¼ì •ì—ì„œ ì•½ê°„ì˜ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### PCB(Process Control Block)

í”„ë¡œì„¸ìŠ¤ ë‚´ë¶€ì— PCB(Process Control Block)ë¼ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ìƒì„± í•©ë‹ˆë‹¤. ì´ PCBì—ëŠ” í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤.

- í”„ë¡œì„¸ìŠ¤ ID
- í”„ë¡œì„¸ìŠ¤ ìƒíƒœ
- í”„ë¡œê·¸ë¨ ì¹´ìš´í„°
- CPU ë ˆì§€ìŠ¤í„° ë“±

ê·¸ë¦¬ê³  ì´ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ CPU, ë©”ëª¨ë¦¬ ë“± ì‹œìŠ¤í…œ ìì›ì„ í• ë‹¹ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤.

## ì“°ë ˆë“œ(Thread)

---

í”„ë¡œì„¸ìŠ¤ëŠ” ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ ë°›ì•„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ëœ»í–ˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ í”„ë¡œì„¸ìŠ¤ì—ì„œ ëˆ„ê°€ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ê±¸ê¹Œìš”? ë°”ë¡œ ì“°ë ˆë“œ(Thread)ê°€ ê·¸ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

> thread
> 1. ì‹¤ <br/>
> 2. (ì´ì•¼ê¸° ë“±ì˜) ê°€ë‹¥[ë§¥ë½] <br/>
> 3. (ì‹¤ ë“±ì„) ê¿°ë‹¤ <br/>

ì“°ë ˆë“œëŠ” í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì€ ì‹¤í–‰ ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë‹¨ì–´ì˜ ëœ»ì²˜ëŸ¼ "ì‹¤í–‰ì˜ íë¦„" ë˜ëŠ” "ì œì–´ì˜ íë¦„"ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  í”„ë¡œì„¸ìŠ¤ëŠ” ìµœì†Œ 1ê°œ ì´ìƒì˜ ì“°ë ˆë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'lineColor': '#2196f3',
      'primaryTextColor': '#000',
      'tertiaryColor': '#333'
    }
  }
}%%
flowchart BT
    subgraph "Memory"
        subgraph "Process"
            T11[Thread 1]
            CODE1[code]
            CODE2[code]
        end
    end

    T11 --- CODE1
    CODE1 --- CODE2

    style Process fill:#555,stroke:#333,stroke-width:1px

    style T11 fill:#fff,stroke:#333,stroke-width:1px
    style CODE1 fill:#bbf,stroke:#333,stroke-width:1px
    style CODE2 fill:#bbf,stroke:#333,stroke-width:1px
</pre>

### ì“°ë ˆë“œì˜ ìì› ê³µìœ 

í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ë‘ ê°œì˜ ì“°ë ˆë“œê°€ ìˆë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. ê° ì“°ë ˆë“œëŠ” ìŠ¤íƒë§Œ ë”°ë¡œ í• ë‹¹ë°›ê³  ë‚˜ë¨¸ì§€ ë©”ëª¨ë¦¬ ê³µê°„ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ê³µìœ í•˜ê²Œ ë©ë‹ˆë‹¤.

<pre class="mermaid center">
flowchart TB
    subgraph CPU["CPU"]
        Registers["ë ˆì§€ìŠ¤í„°"]
    end

    subgraph Process["Process"]
        subgraph Shared["ê³µìœ  ë©”ëª¨ë¦¬ ì˜ì—­"]
            direction TB
            Code["Code ì˜ì—­<br/>(í”„ë¡œê·¸ë¨ ì½”ë“œ)"]
            Data["Data ì˜ì—­<br/>(ì „ì—­/Static ë³€ìˆ˜)"]
            Heap["Heap ì˜ì—­<br/>(ë™ì  í• ë‹¹ ë©”ëª¨ë¦¬)"]
        end

        subgraph ThreadStacks["ì“°ë ˆë“œë³„ ìŠ¤íƒ"]
            Stack1["Thread 1 Stack"]
            Stack2["Thread 2 Stack"]
        end
    end

    %% ìŠ¤íƒ€ì¼ ì •ì˜
    style Process fill:#555,stroke:#333,stroke-width:1px,color:#bbb

    classDef cpu fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    classDef shared fill:#e1f5fe,stroke:#0288d1,stroke-width:2px
    classDef thread fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    classDef process fill:#f5f5f5,stroke:#333,stroke-width:2px

    class CPU cpu
    class Shared shared
    class ThreadContexts,ThreadStacks thread
    class Process process
</pre>

ëª…ë ¹ì„ ì²˜ë¦¬í•˜ëŠ” CPU ì½”ì–´ í•˜ë‚˜ëŠ” í•œ ì‹œì ì— í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë•Œë¬¸ì— ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ë™ì‹œì— ì‹¤í–‰í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì—¬ë„ ì‚¬ì‹¤ì€ ì—¬ëŸ¬ ì“°ë ˆë“œë¥¼ ë²ˆê°ˆì•„ê°€ë©´ì„œ ë¹ ë¥´ê²Œ ë™ì‘í•©ë‹ˆë‹¤.

### ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­(context switching)

ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­(context switching)ì€ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤/ì“°ë ˆë“œë¥¼ ì¤‘ë‹¨í•˜ê³  ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤/ì“°ë ˆë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ëœ»í•©ë‹ˆë‹¤. ì´ë•Œë§ˆë‹¤ ì´ì „ì˜ ìƒíƒœ(ì»¨í…ìŠ¤íŠ¸)ë¥¼ ë³´ê´€í•˜ê³  ìƒˆë¡œìš´ ìƒíƒœë¡œ ì „í™˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

![ì„±ëŠ¥](/assets/img/content/python/010/001.png){:.img-s}

*> ì¶œì²˜ : [Akka in Action](https://livebook.manning.com/concept/akka/thread){:target="_blank"}*{:.img-caption}

ì“°ë ˆë“œê°€ ë§ì•„ì§€ë©´ ì²˜ë¦¬ë„ ë¹¨ë¼ì§ˆê¹Œìš”? ì •ë‹µì¼ ìˆ˜ë„ ìˆê³  ì•„ë‹ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ë„ í•˜ë‚˜ì˜ ì‘ì—…ì´ê¸° ë•Œë¬¸ì—, ë„ˆë¬´ ìì£¼ ë°œìƒí•˜ë©´ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì ì ˆí•œ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

## íŒŒì´ì¬ ì“°ë ˆë“œ

---

íŒŒì´ì¬ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì— í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ìƒì„±ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ ì“°ë ˆë“œë¥¼ ë©”ì¸ ì“°ë ˆë“œ(MainThread)ë¼ê³  í•©ë‹ˆë‹¤. ë©”ì¸ ì“°ë ˆë“œì—ì„œ ë‹¤ë¥¸ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ ë³´ê² ìŠµë‹ˆë‹¤.

<pre class="mermaid center">
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'lineColor': '#2196f3',
      'primaryTextColor': '#000',
      'tertiaryColor': '#333'
    }
  }
}%%
flowchart BT
    subgraph "Memory"
        subgraph "Process"
            T11[Main Thread]
            T12[Sub Thread]

            CODE1[code]
            CODE2[code]
        end
    end

    T11 --- CODE1
    T12 --- CODE2

    style Process fill:#555,stroke:#333,stroke-width:1px

    style T11 fill:#fff,stroke:#333,stroke-width:1px
    style T12 fill:#fff,stroke:#333,stroke-width:1px
    style CODE1 fill:#bbf,stroke:#333,stroke-width:1px
    style CODE2 fill:#bbf,stroke:#333,stroke-width:1px
</pre>

### threading ëª¨ë“ˆ

íŒŒì´ì¬ì—ì„œëŠ” threading ë‚´ì¥ ëª¨ë“ˆì— ìˆëŠ” Thread í´ë˜ìŠ¤ë¥¼ í†µí•´ ì“°ë ˆë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `start` ë©”ì„œë“œë¡œ ì“°ë ˆë“œë¥¼ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `target` : ì“°ë ˆë“œë¡œ ì‹¤í–‰í•  í•¨ìˆ˜
- `args` : iterable ì¸ìê°’ ì „ë‹¬
- `kwargs` : dict í˜•íƒœ ì¸ìê°’ ì „ë‹¬

```python
import threading

thread = threading.Thread(target=lambda x: print(f"Hello, {x}"), args=("Thread",))

thread.start()
```

```text
Hello, Thread
```

### threading.Thread ìƒì† í´ë˜ìŠ¤

Thread í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì—¬ ì“°ë ˆë“œ í´ë˜ìŠ¤ë¥¼ ì •ì˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `target` ì¸ìê°’ì„ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹ , `run` ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ ì“°ë ˆë“œê°€ ì‹¤í–‰í•  ì‘ì—… ì •ì˜í•©ë‹ˆë‹¤.

```python
import threading

class MyThread(threading.Thread):
    def __init__(self, name: str):
        super().__init__()        
        self.name = name
        
    def run(self):
        print(f"Hello, {self.name}")

if __name__ == "__main__":
    thread = MyThread("MyThread")
    thread.start()
```

### í˜„ì¬ ì“°ë ˆë“œ ì •ë³´

`current_thread` ë©”ì„œë“œë¥¼ í†µí•´ í˜„ì¬ ì“°ë ˆë“œì˜ ì •ë³´ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `ident` : ì“°ë ˆë“œ ê³ ìœ  ì‹ë³„ì
- `name` :
  - ê¸°ë³¸ì ìœ¼ë¡œ "Thread-ìˆ«ì (í•¨ìˆ˜ ëª…)"ë¡œ í‘œí˜„
  - ë©”ì¸ ì“°ë ˆë“œì˜ ê²½ìš° = MainThread

```python
import threading as th

def sub_thread():
    print(f"{th.current_thread().name} : {th.current_thread().ident}")

thread1 = th.Thread(target=sub_thread)
thread2 = th.Thread(target=sub_thread)

if __name__ == "__main__":
    thread1.start()
    thread2.start()

    print(f"{th.current_thread().name} Done")
```

```text
Thread-1 (sub_thread) : 139696827188800
Thread-2 (sub_thread) : 140045886248512
MainThread Done
```

## ì“°ë ˆë“œì˜ ë™ì‹œì„±(Concurrency)

---

ì“°ë ˆë“œëŠ” ì„œë¡œ ë²ˆê°ˆì•„ê°€ë©´ì„œ ì‹¤í–‰ë˜ëŠ” ë™ì‹œì„±(Concurrency) íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‹¤ì œë¡œ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, CPUê°€ ë¹ ë¥´ê²Œ ì“°ë ˆë“œë¥¼ ì „í™˜í•˜ë©´ì„œ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ë©”ì¸ ì“°ë ˆë“œì™€ ì„œë¸Œ ì“°ë ˆë“œì˜ ì‹¤í–‰ ìˆœì„œê°€ ë§¤ë²ˆ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ìš´ì˜ì²´ì œì˜ ìŠ¤ì¼€ì¤„ë§ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤.

```python
import threading as th

def print_numbers(i: int):
    for j in range(1, i + 1):
        print(f"Sub Thread : {j}")

thread1 = th.Thread(target=print_numbers, args=(100,))

if __name__ == "__main__":
    thread1.start()
    print("MainThread Done")
```

```text
Sub Thread : 6
Sub Thread : 7
...
MainThread Done
...
Sub Thread: 100
```

## join ë©”ì„œë“œ

---

ì“°ë ˆë“œê°€ ë‹¤ë¥¸ ì“°ë ˆë“œì˜ ì‹¤í–‰ì´ ëë‚ ë•Œ ê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” `join` ë©”ì„œë“œì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤. ì‘ì—…ì˜ ìˆœì„œë¥¼ ì œì–´í•˜ê±°ë‚˜ ì˜ì¡´ì„± ìˆëŠ” ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
import threading as th

def print_numbers(i: int):
    for j in range(1, i + 1):
        print(f"Sub Thread : {j}")

sub_thread = th.Thread(target=print_numbers, args=(100,))

if __name__ == "__main__":
    sub_thread.start()
    sub_thread.join()

    print("MainThread Done")
```

`join` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©”ì¸ ì“°ë ˆë“œ(MainThread)ì—ì„œ ì„œë¸Œ ì“°ë ˆë“œ(Sub Thread)ì˜ ì‘ì—…ì´ ëë‚ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³  Done ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

```text
...
Sub Thread : 99
Sub Thread : 100
MainThread Done
```

ì—¬ëŸ¬ê°œì˜ ì“°ë ˆë“œë¥¼ ìˆœì„œì ìœ¼ë¡œ ì‹¤í–‰í•˜ê³  ì‹¶ì€ ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. thread1ì˜ ì‘ì—…ì´ ëª¨ë‘ ëë‚œ ë’¤ì— thread2ì˜ ì‘ì—…ì´ ì‹œì‘ ë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
if __name__ == "__main__":
    thread1.start()
    thread1.join()

    thread2.start()
    thread2.join()
    print("MainThread Done")
```

## ë°ëª¬(daemon) ì“°ë ˆë“œ

---

ë°ëª¬(daemon) ì“°ë ˆë“œëŠ” ë©”ì¸ ì“°ë ˆë“œê°€ ì¢…ë£Œë˜ë©´ í•¨ê»˜ ì¢…ë£Œë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì“°ë ˆë“œì…ë‹ˆë‹¤. ì£¼ë¡œ ë©”ì¸ ì“°ë ˆë“œì˜ ë³´ì¡° ì—­í• ì„ í•˜ëŠ” ì‘ì—…ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ê¸°ì¡´ ì“°ë ˆë“œë¥¼ `daemon` ì¸ìê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë§Œë“¤ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
daemon_thread = th.Thread(target=background_task, daemon=True)
```

```python
import threading as th
import time

def background_task():
    while True:
        print("Daemon thread is running...")
        time.sleep(1)

daemon_thread = th.Thread(target=background_task, daemon=True)

if __name__ == "__main__":
    daemon_thread.start()
    print("Main thread is running...")
    time.sleep(3)
    print("Main thread is ending...")
```

```text
Main thread is running...
Daemon thread is running...
Daemon thread is running...
Daemon thread is running...
Main thread is ending...
Daemon thread is running...
```

## is_alive ë©”ì„œë“œ

---

`is_alive` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤ë ˆë“œê°€ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ë™ì‘ì„ ëª¨ë‹ˆí„°ë§í•˜ëŠ”ë° ìœ ìš©í•©ë‹ˆë‹¤. íŠ¹íˆ ë””ë²„ê¹…ì´ë‚˜ ë¡œê¹… ì‹œì— ìœ ìš©í•˜ê²Œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì˜ˆì‹œ : ëª¨ë‹ˆí„°ë§

```python
import threading as th
import time

def monitor_thread(thread_to_monitor: th.Thread):
    while thread_to_monitor.is_alive():
        print(f"ëª¨ë‹ˆí„°ë§: {thread_to_monitor.name} ì‹¤í–‰ ì¤‘")
        time.sleep(0.5)
    print(f"ëª¨ë‹ˆí„°ë§: {thread_to_monitor.name} ì¢…ë£Œë¨")

def worker():
    print(f"{th.current_thread().name} ì‹œì‘")
    time.sleep(1)
    print(f"{th.current_thread().name} ì¢…ë£Œ")

if __name__ == "__main__":
    work_thread = th.Thread(target=worker, name="WorkerThread")

    monitor = th.Thread(
        target=monitor_thread, args=(work_thread,), name="MonitorThread", daemon=True
    )

    work_thread.start()
    monitor.start()

    work_thread.join()
```

1. work_threadë¥¼ ë¨¼ì € ìƒì„±í•˜ì—¬ monitor ì“°ë ˆë“œì— ì „ë‹¬í•©ë‹ˆë‹¤.
2. monitorì—ì„œ work_thread.is_alive()ë¥¼ í†µí•´ work_threadê°€ ë™ì‘ ì¤‘ì¸ì§€ í™•ì¸ í•©ë‹ˆë‹¤.
3. work_threadê°€ ì¢…ë£Œë˜ë©´ ë©”ì¸ ì“°ë ˆë“œ(MainThread)ê°€ ì¢…ë£Œ ë˜ë©´ì„œ ë°ëª¬ ì“°ë ˆë“œì¸ monitorë„ ì¢…ë£Œ ë©ë‹ˆë‹¤.

```text
WorkerThread ì‹œì‘
ëª¨ë‹ˆí„°ë§: WorkerThread ì‹¤í–‰ ì¤‘
ëª¨ë‹ˆí„°ë§: WorkerThread ì‹¤í–‰ ì¤‘
WorkerThread ì¢…ë£Œ
ëª¨ë‹ˆí„°ë§: WorkerThread ì¢…ë£Œë¨
```

## ë§ˆë¬´ë¦¬

---
ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¤‘ìš”í•œ ê°œë…ë“¤ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.

- í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ íŒŒì¼ì—ì„œ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì–´ í”„ë¡œì„¸ìŠ¤ê°€ ë˜ëŠ” ê³¼ì •
- í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì‹¤í–‰ ë‹¨ìœ„ì¸ ì“°ë ˆë“œì˜ ê°œë…
- íŒŒì´ì¬ì—ì„œ threading ëª¨ë“ˆì„ ì‚¬ìš©í•œ ì“°ë ˆë“œ ìƒì„±ê³¼ ê´€ë¦¬ ë°©ë²•
- `join()`, `is_alive()`, `daemon` ë“± ì‹¤ìš©ì ì¸ ì“°ë ˆë“œ ì œì–´ ê¸°ë²•

## ë” í•´ë³´ê¸°

---

ë” íš¨ìœ¨ì ì´ê³  ì•ˆì „í•œ ë©€í‹°ì“°ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì„ ìœ„í•´ì„œ ì•„ë˜ì˜ ì‹¬í™” ì£¼ì œë“¤ì„ í•™ìŠµí•´ë³´ë©´ ì¢‹ì„ë“¯ í•©ë‹ˆë‹¤. ğŸ˜Š

- ë®¤í…ìŠ¤(Mutex)
- ì„¸ë§ˆí¬ì–´(Semaphore)
- ThreadPoolExecutorë¥¼ í™œìš©í•œ íš¨ìœ¨ì ì¸ ì‘ì—… ì²˜ë¦¬
